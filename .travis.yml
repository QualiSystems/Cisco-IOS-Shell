language: python
python:
- '2.7'
env:
  - TEST_DIR=package
  - TEST_DIR=cisco_ios_shell

before_install:
    - cd $TEST_DIR
    - pip install coveralls
    - pip install -r test_requirements.txt

install:
    - python setup.py install

script:
    - nosetests --with-coverage --cover-package=cloudshell/devices --where=tests
    - 'if [ ${TEST_DIR} = "package" ]; then
        python setup.py sdist --format zip
      fi'

after_success:
    - coveralls
